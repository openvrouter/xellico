
方法
=====

本研究は, 以下の項目を前提として研究を進めていく.

- NICの性能が向上するにつれ, 1ポートを複数のコアで処理する必要がある
- 複数プロセッサシステムでDPDKを動作させる場合,
  inter-processorではパケットをbulk-transmissionする必要がある
- RSSのスケーラビリティを正確に計測を行たい
- bulk-transmissionを正確に計測を行たい

多くのDPDKアプリケーションで高性能化のために必要不可欠と言われる,
RSSとTxBufferの構成を変化させ, 高性能通信を行う上での最適化
設定構成を明らかにしたい.

本研究では,これらの性能計測を円滑に行うために,
Xellicoというソフトウェアルータを新規に開発し, 計測を行なった.
Xellicoはオープンソースで開発を行なっており,DPDKのexample/l3fwd
をforkして開発開始を行なった. 本研究で調節を行たい, RSSと
TxBufferの構成パターンを実行時にjsonファイルから入力することができ,
性能評価に適している.

本研究の性能計測は,2台のXeonサーバを用いて行なった, 片方でDUTとして
Xellicoを動作させ, 他方では通信性能計測のためにpktgen-dpdkを動作させた.
性能は帯域と遅延に関して行う.  また, 性能計測結果の正確な考察を行うために,
TimeStampClockを用いてDPDKの関数のマイクロレイテンシを計測した.

新しい部分
----------

本研究の目的は以下のようになる.

- HW特性をまとめる

  - Xeon E5、X540だったら?
  - Xeon SP Siliver XL710だったら?
  - 上記の項目から, 全ての外部測定量が見積もることができる状態がゴール
  - 外部の計測器(IXIA等)と内部計測法との数値差を出す.
  - 性能ギャップにより, HWトランザクションのミス回数が推定できる
  - X540はNUMAでは64byte WRしないというのが知られている.
  - とまあこれらの情報を全て論理的に説明しよう

- VNF開発時に性能目標と使用HWを決めた時の細かい目標を単純に示す.

  - 3GHz 2NUMA-Nodes 16cores/CPU X540
  - 3GHz 2NUMA-Nodes 22cores/CPU Connect-X5

これらを知るために, 本研究では以下の実験を行い, 最初の目的を満足させる.

- 実験準備

  - 測る方法を決める (BCC/TCS)
  - 決めた方法で測る
  - 測った値が正しいかを調べる
  - 外部, 内部のギャップを示す.
  - ギャップが存在する場合の理由の仮説をたて, 仮説を検証する

- 準備した方法で,RSS, TxBufferの性能特性を調べる
- 一般的なVNF開発のための性能推定方法を式で示す.

.. toctree::
  :maxdepth: 1

  method_environment
  method_xellico
  method_eval


