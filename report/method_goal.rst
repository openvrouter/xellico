
研究の目標
=============

先ほどの練習から, 研究の目標を「ハードウェア特性をまとめる」と
「VNF開発時に性能目標と使用HWを決めた時の細かい目標を単純に示す」
の二つとして研究を進めていく.

ハードウェア特性をまとめる
--------------------------

HW特性とはなにか. 例えばよく知られているHW特性を考えてみよう.
Intel XL710は64Byteのパケットではワイヤーレートで動作をしない.
[PANDA20150409]_ , [YASUaintec]_ . 他にも, Intel x540はRSS queueを1個にした時,
NUMAまたぎのパケットフォワード時に8500Mbps近くを天井に性能限界に陥る.
これらはソフトウェア側からは判断仕切れない問題であり, 現状では
どこに問題があるのかが推定しきれない.
しかし, 細かくHWカウンタ等を記録し, それを外部トラフィック計測器と
照らし合わせることにより, どこでパケットが送信仕切れていないのかが
わかるはずである.

本研究では, 内部で計測したマイクロレイテンシと, 外部で計測したベンチマークを
照らし合わせ, どのレイヤでこれらのギャップが生じているかを推定する.

ここではハードウェア特性は以下の様に定義した.

rx_burst
^^^^^^^^^

以下の項目をNIC別に測定し, HW特性の一つとする.

- バルクサイズと関数遅延の関係
- 受信するパケットサイズと関数遅延の関係
- RSS構成を変更した時に上記値に変化があるか

tx_burst
^^^^^^^^^

以下の項目をNIC別に測定し, HW特性の一つとする.

- バルクサイズと関数遅延の関係
- 送信するパケットサイズと関数遅延の関係
- RSS構成を変更した時に上記値に変化があるか


VNF開発時に性能目標と使用HWを決めた時の細かい目標を単純に示す
--------------------------------------------------------------

上記のハードウェア特性をまとめることができると, 新たにネットワーク
アプリライアンスを開発する時に,ハードウェアを決定した瞬間に
細かいパケット処理部分をどの程度の性能で実装すれば良いのかがわかる.

例えば以下の様なネットワークアプライアンス開発を行うとする.

- Xeon SP Silver 1.8GHz 2socket 8cores/CPU を使う
- X540-T1を各socketに一つずつ実装し, 計2portを使う
- Firewallを実装する

この時, のX540の ``rx_burst`` と ``tx_burst`` の遅延の量がわかっていれば,
パケット処理(Firewallのフィルタ部分)にどの程度の遅延を許容されるかが
計算可能である.

この様に本研究のデータを用いて新たなネットワークアプライアンス開発の
性能関連の議論をより単純化することができる.
実際にはパケット処理を複数パケットに対して同時に行うようなものが
多いかもしれないが, ここまでしっかり計算することは一度は必要かと思う.

